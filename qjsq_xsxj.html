











<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./lib/weui/css/weui.css"/>
    <link rel="stylesheet" href="./lib/weui/css/weuix.css"/>
    <link rel="stylesheet" href="./lib/weui/css/main.css">
    <link rel="stylesheet" href="./lib/weui/css/home.css">
    <link rel="stylesheet" href="./lib/weui/css/font.css">
	<script type="text/javascript" src="./lib/weui/js/jquery.min.js"></script>
    <script src="./lib/weui/js/zepto.min.js"></script>
    <script src="./lib/weui/js/zepto.weui.js"></script>

    <script src="./lib/weui/js/picker.city.js"></script>
    <script src="./lib/weui/js/php.js"></script>
    <script src="./lib/weui/js/lrz.min.js"></script>
    <script type="text/javascript" src="./lib/weui/js/layer.js"></script>
    <title>西北工业大学</title>
    <style type="text/css">
    	.r-mark {
		    color: #f00;
		    padding-right: 5px;
		}
		i {
		    font-style: normal;
		}
		.weui-toptips_warn {
		    background-color: #e64340;
		}
		.weui-toptips {
		    display: none;
		    position: fixed;
		    -webkit-transform: translateZ(0);
		    transform: translateZ(0);
		    top: 0;
		    left: 0;
		    right: 0;
		    padding: 5px;
		    font-size: 14px;
		    text-align: center;
		    color: #fff;
		    z-index: 5000;
		    word-wrap: break-word;
		    word-break: break-all;
		}
		.read{
			text-align: right;
		}
    </style>
</head>
<body>
<!-- <div class="weui-toptips weui-toptips_warn js_tooltips">提示：请输入正确的信息！</div> -->
<div class="container details">
	<div class="topbar" style="height: 52px;">
	   <div class="top-head">
	      <div>
			<a href="./details.html">
				<i class="iconfont icon-back"style="color: #FFF;"></i>
			</a>
		  </div>
	      <div>请假信息</div>
	       <div>
	       	 <a  href="./index.html">
	          	<i class="iconfont icon-fangzi" style="color: #FFF;"></i>
	         </a>
	       </div>  
	    </div>
 	</div>
    <!-- <div class="weui-cells__title custom"><i class="icon iconfont icon-jibenxinxi1"></i>请假信息</div> -->
    <div class="weui-cells custom">
        
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>请假类型</p>
            </div>
            <div class="weui-cell__ft">
                <input class="weui-input read" id="sylb" name="sylb" value="私事" readonly="readonly" type="text">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>行程范围</p>
            </div>
            <div class="weui-cell__ft">
                <input class="weui-input read" id="sflkxx" name="sflkxx" value="西安市" readonly="readonly" type="text">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>起始时间</p>
            </div>
            <div class="weui-cell__ft">
                <input class="weui-input read" id="qssj" name="qssj" type="text" value="2021-09-04 06时" readonly="readonly"/>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>截止时间</p>
            </div>
            <div class="weui-cell__ft">
            	<input class="weui-input read" type="text" value="2021-09-07 06时" readonly="readonly"/>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>请假时长</p>
            </div>
            <div class="weui-cell__ft">
            	<input class="weui-input read" type="text" value="72小时" readonly="readonly"/>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>前往目的地</p>
            </div>
            <div class="weui-cell__ft">
                <input class="weui-input read" id="qwmdd" name="qwmdd" value="西安市" readonly="readonly" type="text">
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>事由说明</p>
            </div>
            <div class="weui-cell__ft">
                
                <p>私事</p>
            </div>
        </div>
    </div>
    <div class="weui-cells__title custom"><i class="icon iconfont icon-qita"></i>销假信息</div>
    <div class="weui-cells custom">
    	<input type="hidden" id="id" name="id" value="e67t4gw0ch29r7dh6douu462dq7ltjh6"/>
    	<input type="hidden" id="xsxh" name="xsxh" value="2020262914"/>
    	<input type="hidden" id="xsxm" name="xsxm" value="刘震"/>
    	<input type="hidden" id="dyspr" name="dyspr" value="1"/>
    	<div class="weui-cell">
            <div class="weui-cell__bd">
                <p>实际返校时间</p>
            </div>
            <div class="weui-cell__ft">
            	<input class="weui-input" id="sjfxsj" name="sjfxsj" type="text" value="" placeholder="请选择实际返校时间"/>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__bd">
                <p>销假说明</p>
            </div>
        </div>
        <div class="weui-cell">
            <div class="textarea-box">
                <textarea class="weui-textarea" id="xjsm" name="xjsm" placeholder="销假说明" rows="3" maxlength="100"></textarea>
            </div>
        </div>
    </div>
    <div class="sub-btn-box">
        <button onclick="go_sub()" class="weui-btn bg-blue">保 存</button>
    </div>
    <div id="toast" style="display: none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-success-no-circle weui-icon_toast"></i>
            <p class="weui-toast__content">已保存</p>
        </div>
    </div>
    <div class="footer-copy-space"></div>
</div>

<script>
    $(function () {
        
        $("#sjfxsj").datetimePicker({
    		title: '请选择实际返校时间',
	        times: function () {
	            return [
	                {
	                    values: (function () {
	                        var hours = [];
	                        for (var i=0; i<24; i++) hours.push(i > 9 ? i : '0'+i);
	                        return hours;
	                    })()
	                },
	                {
	                    divider: true,  // 这是一个分隔符
	                    content: '时'
	                }
	            ];
	        },
	        onChange: function (picker, values, displayValues) {
	            console.log(values);
	        },
	    });
    });
    
    function go_sub(){
    	var id = $("#id").val();
    	var dyspr = $("#dyspr").val();
    	var sjfxsj = $("#sjfxsj").val();
    	var qssj = $("#qssj").val();
    	var xsxh = $("#xsxh").val();
    	var xsxm = $("#xsxm").val();
    	
    	if(sjfxsj==""){
			showWarn($("#sjfxsj").parents('.weui-cell'));
			$("#sjfxsj").focus();
			return;
		}
		sjfxsj = sjfxsj.substr(0,sjfxsj.length-1);
		var xjsm = $("#xjsm").val();
    	$.ajax({
			url:'qjsq_util.jsp',
			data:{actionType:'qjxj',id:id,qssj:qssj,sjfxsj:sjfxsj,xjsm:xjsm,dyspr:dyspr,xsxh:xsxh,xsxm:xsxm},
			dataType:'json',
			type:'post',
			success:function(data){
				var cgts='销假保存成功';
				if(data.state!=null&&data.state=='1'){
					layer.msg(cgts,{time:3000},function(){
						window.location.href="qjsq_list.jsp";
					});
				}else{
					$('#iosDialog2').fadeIn(200);
				}
			},error:function(request, textStatus, errorThrown){
				if(request.status==403){
					alert("非法字符,拒绝访问！");
				}else{
					alert("操作出现异常，请稍后再试！"+request.status);
				}
			}
		});
    	
    }
    
    function showWarn(Obj){
		$(Obj).addClass('weui-cell_warn');
		var $tooltips = $('.js_tooltips');
        if ($tooltips.css('display') != 'none') return;
        $('.page.cell').removeClass('slideIn');
		$tooltips.css('display', 'block');
        setTimeout(function () {
            $tooltips.css('display', 'none');
            $(Obj).find('.weui-icon-warn').remove();
        }, 3000);
	}
	
	var toastShow = function(){
		var $toast = $('#toast');
       	if ($toast.css('display') != 'none') return;
       	$toast.fadeIn(100);
        setTimeout(function () {
            $toast.fadeOut(100);
        }, 2000);
	};
</script>
<div class="weui-gallery" style="display: none">
    <span class="weui-gallery__img"></span>
    <div class="weui-gallery__opr">
    </div>
</div>
<script src="/wx/xg/yz-mobile/js/checkdev.js"></script>
</body>
</html>
